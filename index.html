<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon.png">
  <title>QA Automation Kanban Tracker</title>
  <style>
    /* –°—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */
    /* ... –≤—Å–µ —Å—Ç–∏–ª–∏ –∫–∞–∫ —Ä–∞–Ω—å—à–µ ... */
  </style>
</head>
<body>
  <!-- –í–µ—Å—å HTML-–∫–æ–Ω—Ç–µ–Ω—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
  <!-- ... -->

  <script>
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –ø—Ä–∏ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –∑–∞–¥–∞—á (auto-sync)
    function saveToStorage() {
      localStorage.setItem('qaKanbanTasks', JSON.stringify(tasks));
    }

    const form = document.getElementById('taskForm');
    const columns = {
      todo: document.getElementById('todo'),
      inProgress: document.getElementById('inProgress'),
      done: document.getElementById('done')
    };
    const saveBtn = document.getElementById('saveBtn');

    let tasks = JSON.parse(localStorage.getItem('qaKanbanTasks')) || [
      { id: 1, title: 'BDD + Gherkin + Behave', description: '–ü–∏—à–µ–º –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã –≤ —Å—Ç–∏–ª–µ Given-When-Then', link: 'https://behave.readthedocs.io/en/stable/', status: 'todo' },
      { id: 2, title: 'Test Design Techniques', description: '–ö–ª–∞—Å—Å—ã —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ—Å—Ç–∏, –≥—Ä–∞–Ω–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –¥—Ä.', link: 'https://testautomationu.applitools.com/test-design/', status: 'todo' },
      { id: 3, title: 'Mock / Stub —Å–µ—Ä–≤–∏—Å—ã', description: '–†–∞–±–æ—Ç–∞ —Å —Ñ–µ–π–∫–æ–≤—ã–º–∏ API –∏ Postman mock servers', link: 'https://learning.postman.com/docs/designing-and-developing-your-api/mocking-data/setting-up-mock/', status: 'todo' },
      { id: 4, title: 'QA Guru —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç', description: '–†–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —Å API + UI + CI/CD + Allure', link: 'https://qaguru.ru/', status: 'inProgress' }
    ];

    let idCounter = tasks.length + 1;

    function renderTasks() {
      Object.values(columns).forEach(col => col.querySelectorAll('.task').forEach(el => el.remove()));
      tasks.forEach(task => {
        const el = document.createElement('div');
        el.className = 'task';
        el.draggable = true;
        el.dataset.id = task.id;
        el.innerHTML = `
          <div><strong contenteditable="true" onblur="editTitle(${task.id}, this.innerText)">${task.title}</strong></div>
          <div><textarea rows="2" onblur="editDescription(${task.id}, this.value)">${task.description}</textarea></div>
          ${task.link ? `<a href="${task.link}" target="_blank">üîó –°—Å—ã–ª–∫–∞</a>` : ''}
          <div class="actions">
            <button onclick="deleteTask(${task.id})">üóëÔ∏è</button>
          </div>
        `;
        columns[task.status].appendChild(el);
        el.addEventListener('dragstart', dragStart);
      });
      saveToStorage();
    }

    function editTitle(id, text) {
      const task = tasks.find(t => t.id === id);
      if (task) task.title = text.trim();
      saveToStorage();
    }

    function editDescription(id, text) {
      const task = tasks.find(t => t.id === id);
      if (task) task.description = text.trim();
      saveToStorage();
    }

    function dragStart(e) {
      e.dataTransfer.setData('text/plain', e.target.dataset.id);
    }

    Object.values(columns).forEach(col => {
      col.addEventListener('dragover', e => e.preventDefault());
      col.addEventListener('drop', e => {
        const id = e.dataTransfer.getData('text/plain');
        const task = tasks.find(t => t.id == id);
        if (task) {
          task.status = col.id;
          renderTasks();
        }
      });
    });

    function deleteTask(id) {
      tasks = tasks.filter(t => t.id !== id);
      renderTasks();
    }

    form.addEventListener('submit', e => {
      e.preventDefault();
      const title = document.getElementById('title').value;
      const description = document.getElementById('description').value;
      const link = document.getElementById('link').value;
      const column = document.getElementById('column').value;
      tasks.push({ id: idCounter++, title, description, link, status: column });
      form.reset();
      renderTasks();
    });

    saveBtn.addEventListener('click', () => {
      saveToStorage();
      alert('–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ –±—Ä–∞—É–∑–µ—Ä–µ!');
    });

    renderTasks();
  </script>
</body>
</html>
